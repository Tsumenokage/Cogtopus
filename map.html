<!DOCTYPE html>
<html>
	<head>
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB8NKmCuIVrno_ISygSrp__Y8EFoFij-GY" type="text/javascript"></script>
	</head>

	<body>
		<div id="googleMap" style="width:1000px;height:800px;"></div>
	</body>
</html>

<script>
	var initialLocation;
	var browserSupportFlag =  new Boolean();
	var lat = 0;
	var lng = 0;
	var map = null;
	var myCenter=new google.maps.LatLng(44.80627089999999,-0.5974830999999767);
	var newInfo = null;
	var htmlVar = 
		'<div id="signalEvent">' +
		'	</div><button type="button" onclick="lel();">Event ici</button>' + 
				'</div>';
	var markers = new Array();
	
	function initialize()
	{
		map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
		
		map.addListener('click', function(event) { 
			var latlng = event.latLng;
			lat = latlng.lat();
			lng = latlng.lng();
			
			clickMap();
		});
		
		navigator.geolocation.getCurrentPosition(function(position) {
		  initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
		  map.setCenter(initialLocation);
		});
		
		
		
		var mapProp = {
		  center:initialLocation,
		  zoom:8,
		  mapTypeId:google.maps.MapTypeId.ROADMAP
		  };
		
		  
	}

	google.maps.event.addDomListener(window, 'load', initialize);

	function clickMap()
	{
		if (newInfo != null)
			newInfo.close();
		newInfo = new google.maps.InfoWindow({
			'content' : htmlVar, 							// contenu qui sera affiché  
			'map' : map,                                           // carte sur laquelle est affichée l'InfoWindow    
			'position' : new google.maps.LatLng(lat, lng)       // position d'affichage de l'InfoWindow
		  });
	}
	
	function lel()
	{
		var marker=new google.maps.Marker({
		  position:new google.maps.LatLng(lat, lng),
		  });
		
		markers.push(marker);
		marker.setMap(map);
		newInfo.close();
	}
</script>
